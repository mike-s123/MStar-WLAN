#
# Register file for Tristar MPPT
# THIS NEEDS TO BE DONE, BELOW IS NOT CORRECT
#
r,0,sw_ver,Software Version,-,bcd,RO,
r,1,n_sys_v,Battery Voltage Settings multiplier (1 for 12V nominal - 2 for 24V nominal),-,f16,RO,
r,4,vdd_actual,3.3V Supply Voltage,V,f16,RO,
r,5,adc_p12,12V Supply Voltage,V,f16,RO,
r,6,adc_p5,5V Supply Voltage,V,f16,RO,
r,7,adc_fgdrive,Gate Drive Voltage,V,f16,RO,
r,8,adc_vmeter,MeterBus Supply Voltage,V,f16,RO,
r,16,adc_ic,Charge Current,A,f16,RO,
r,17,adc_ia,Array Current,A,f16,RO,
r,18,adc_vbterm,Battery Terminal Voltage,V,f16,RO,
r,19,adc_va,Array Voltage,V,f16,RO,
r,20,adc_vl,Load Voltage,V,f16,RO,
r,21,adc_ib,Battery Current (net),A,f16,RO,
r,22,adc_il,Load Current,A,f16,RO,
r,23,adc_vbsense,Battery Sense Voltage,V,f16,RO,
r,24,adc_vb_f_1m,Battery Voltage - slow filter (60s),V,f16,RO,
r,25,adc_ib_f_1m,Battery Current (net) - slow filter (60s),A,f16,RO,
r,26,T_hs,Heatsink Temperature,C,f16,RO,
r,27,T_batt,Battery Temperature (Either Ambient or RTS if connected),C,f16,RO,
r,28,T_amb,Ambient (local) Temperature,C,f16,RO,
r,29,T_rts,Remote Temperature Sensor Temp.,C,f16,RO,
r,30,T_ind[U],Phase U inductor temperature,C,f16,RO,
r,31,T_ind[V],Phase V inductor temperature,C,f16,RO,
r,32,T_ind[W],Phase W inductor temperature,C,f16,RO,
r,33,charge_state,Charge State,-,uint,RO,
r,34,array_fault,Array Fault Bitfield,-,bitf,RO,
r,35,vb_f,Battery Voltage - slow filter (25s),V,f16,RO,
r,36,vb_ref,Battery Regulator Reference Voltage,V,f16,RO,
r,37,vb_ref_charge_slave,Battery Regulator Slave Voltage,V,f16,RO,
r,38,Ahc_r,Ah Charge Resettable,Ah,dn10,RO,
r,40,Ahc_t,Ah Charge Total,Ah,dn10,RO,
r,42,kWhc_r,kWh Charge Resettable,kWh,n10,RO,
r,43,kWhc_t,Kwh Charge Total,kWh,n10,RO,
r,44,Tb_lo_limit_100,Battery Temp Foldback 100% Output Limit,C,f16,RO,
r,45,Tb_lo_limit_0,Battery Temp Foldback 0% Output Limit,C,f16,RO,
r,46,load_state,Load State,-,uint,RO,
r,47,load_fault,Load Fault Bitfield,-,bitf,RO,
r,48,V_lvd,Load Current Compensated LVD Voltage,V,f16,RO,
r,49,V_lhvd,Load HVD Voltage,V,f16,RO,
r,50,Ahl_r,Ah Load Resettable,Ah,dn10,RO,
r,52,Ahl_t,Ah Load Total,Ah,dn10,RO,
r,54,hourmeter,Hourmeter,hours,dint,RO,
r,56,alarm,Alarm Bitfield,-,dbitf,RO,
r,58,dip_switch,DIP Switch Settings at Power On (switch[1..8] in bits[0..7]),-,bitf,RO,
r,59,led_state,SOC LED State,-,uint,RO,
r,60,Power_out,Charger Output Power,W,f16,RO,
r,61,Sweep_Vmp,Array Vmp (found during sweep),V,f16,RO,
r,62,Sweep_Pmax,Array Max Output Power (found during sweep),W,f16,RO,
r,63,Sweep_Voc,Array Voc (found during sweep),V,f16,RO,
r,64,va_ref,Array Target Voltage,V,f16,RO,
r,65,Vb_min_daily,Minimum Battery Voltage (daily),V,f16,RO,
r,66,Vb_max_daily,Maximum Battery Voltage (daily),V,f16,RO,
r,67,Ahc_daily,Ah Charge (daily),Ah,f16,RO,
r,68,Ahl_daily,Ah Load (daily),Ah,f16,RO,
r,69,array_fault_daily,Array Fault Bitfield (daily),-,bitf,RO,
r,70,load_fault_daily,Load Fault Bitfield (daily),-,bitf,RO,
r,71,alarm_daily,Alarm Bitfield (daily),-,dbitf,RO,
r,73,time_ab_daily,Time in Absorption (daily),secs,uint,RO,
r,74,time_eq_daily,Time in Equalization (daily),secs,uint,RO,
r,75,time_fl_daily,Time in Float (daily),secs,uint,RO,
r,76,Va_max_daily,Maximum Array Voltage (daily),V,f16,RO,
r,77,charge_led_state,Charge Status LED State,-,uint,RO,
r,78,lighting_should_be_ on,In lighting mode non-zero indicates load ON,-,uint,RO,
r,79,va_ref_fixed,Fixed Vmp if set (overrides va_ref_fixed_pct below if both set),V,f16,RO,
r,80,va_ref_fixed_pct,Vmp = this fraction of Voc if set (0.0 to 0.99; 0.0 disables),-,f16,RO,
r,81,alarm_on_setting_ change,If set to 1; writing EEPROM settings will cause an alarm (0x1000 0000) instead of a fault. If set to 0, the default; the normal traditional behavior (fault on settings Change) remains. See the variable of the same name in EEPROM for a persistent version of this. New in sw_ver=13,0,uint,RO,
r,57344,EV_reg,Regulation Voltage @ 25ºC,V,f16,RW,
r,57345,EV_float,Float Voltage @ 25ºC (Set to zero to disable float),V,f16,RW,
r,57346,Et_float,Time Before Entering Float (Absorption Time),secs,uint,RW,
r,57347,Et_floatlb,Time Before Entering Float due to Low Battery (Absorption Extension Time),secs,uint,RW,
r,57348,EV_floatlb_trip,Voltage Trigger for Low Battery Float Time,V,f16,RW,
r,57349,EV_float_cancel,Voltage to Cancel Float,V,f16,RW,
r,57350,Et_float_exit_cum,Exit Float Time,secs,uint,RW,
r,57351,EV_eq,Equalize Voltage @ 25ºC (Set to zero to disable equalize),V,f16,RW,
r,57352,Et_eqcalendar,Days Between EQ Cycles,days,uint,RW,
r,57353,Et_eq_above,Equalize Time Limit above EV_reg,secs,uint,RW,
r,57354,Et_eq_reg,Equalize Time Limit at EV_eq,secs,uint,RW,
r,57357,alarm_on_setting_ change,If set to 1; writing EEPROM settings will cause an alarm (0x1000 0000) instead of a fault. If set to 0 or 0xFFFF;  the default; the normal traditional behavior (fault on settings change) remains. Note that writing this setting for the first time will fault the control; so see the equivalent temporary variable with the same name in RAM. New in sw_ver=13.,0,uint,RW,
r,57360,Evb_ref_charge_lim,Reference Charge Voltage Limit,V,f16,RW,
r,57363,Eib_lim,Battery Charge Current Limit,A,f16,RW,
r,57370,EV_tempcomp,Temperature Compensation Coefficient,V,f16,RW,
r,57371,EV_hvd,High Voltage Disconnect @ 25ºC (Set to zero to disable HVD),V,f16,RW,
r,57372,EV_hvr,High Voltage Reconnect,V,f16,RW,
r,57373,Evb_ref_lim,Maximum Charge Voltage Reference (0 disables),V,f16,RW,
r,57374,ETb_max,Max Battery Temp Compensation Limit,C,int,RW,
r,57375,ETb_min,Min Battery Temp Compensation Limit,C,int,RW,
r,57376,ETb_lo_limit_100,Battery current limit upper temperature,C,int,RW,
r,57377,ETb_lo_limit_0,Battery current limit lower temperature,C,int,RW,
r,57378,EV_lvd,Low Voltage Disconnect,V,f16,RW,
r,57379,EV_lvr,Low Voltage Reconnect,V,f16,RW,
r,57380,EV_lhvd,Load High Voltage Disconnect (Set to zero to disable HVD),V,f16,RW,
r,57381,EV_lhvr,Load High Voltage Reconnect,V,f16,RW,
r,57382,ER_icomp,LVD Load Current Compensation,A,f16,RW,
r,57383,Et_lvd_warn,LVD Warning Timeout,secs,uint,RW,
r,57392,EV_soc_g_gy,LED Green to Green&Yellow Limit,V,f16,RW,
r,57393,EV_soc_gy_y,LED Green&Yellow to Yellow Limit,V,f16,RW,
r,57394,EV_soc_y_yr,LED Yellow to Yellow&Red Limit,V,f16,RW,
r,57395,EV_soc_yr_r,LED Yellow&Red to Red Flashing Limit,V,f16,RW,
r,57396,Emodbus_id,Modbus ID,0,uint,RO,Set RO for safety
r,57397,Emeter_id,Meterbus ID,0,uint,RO,Set RO for safety
r,57398,EVa_ref_fixed,Fixed Vmp if set (overrides EVa_ref_fixed_pct below if both set),V,f16,RW,
r,57399,EVa_ref_fixed_pct,Vmp = this fraction of Voc if set (0.0 to 0.99; 0.0 disables),0,f16,RW,
r,57400,Eic_lim,Charge Current Limit,A,f16,RW,
# this is wrong
#r,57408,Ehourmeter,Hourmeter,hours,dint,RO,
# below is documented as n10, actually f16, just plain wrong?
#r,57410,EAhl_r,Ah Load Resettable,Ah,f16,RO,
#r,57412,EAhl_t,Ah Load Total,Ah,f16,RO,
#r,57414,EAhc_r,Ah Charge Resettable,Ah,f16,RO,
#r,57416,EAhc_t,Ah Charge Total,Ah,f16,RO,
#r,57418,EkWhc_r,kWhc Resettable,kWh,f16,RO,
#r,57419,EkWhc_t,kWhc Total,kWh,f16,RO,
# these are wrong, return 2 and 1 (int)
#r,57420,EVb_min,Battery Voltage Minimum,V,f16,RO,
#r,57421,EVb_max,Battery Voltage Maximum,V,f16,RO,
# returns FFFF
#r,57422,EVa_max,Array Voltage Maximum,V,f16,RO,
#r,57423,Etmr_eqcalander,Time Since Last Equalize,days,uint,RO,
#r,57424,unk,Undocumented,-,f16,RO,
#
# Coils for Tristar MPPT
#
c,0,EqTrig,Equalize triggered,
c,1,LoadDis,Load disconnect if 1,
c,2,ChargeDis,Charge disconnect if 1,
c,16,ClrAhReset,Clear Ah Resettable,
c,17,ClrAhTotal,Clear Ah Total,
c,18,ClrKwhReset,Clear kWh Resettable,
c,20,ClrFaults,Clear Faults,
c,21,ClrAlarms,Clear Alarms,
c,22,EEUpdate,Force EEPROM update,
c,24,ClrKwhTotal,Clear kWh Total,
c,25,ClrVb,Clear Battery Voltage min/max,
c,26,LightTest,Lighting mode test - 10 minutes,
c,254,FacReset,Factory Reset,
c,255,Reset,Reset controller,

#
# Alarms for Prostar MPPT
#
m,0,RTS Open,
m,1,RTS Short,
m,2,RTS Disconnected,
m,3,Ths Open,
m,4,Ths Short,
m,5,Heatsink Hot,
m,6,Tind Open,
m,7,Tind Short,
m,8,Tind Hot,
m,9,Current Limit,
m,10,I Offset,
m,11,Battery Sense Out of Range,
m,12,Battery Sense Disconnected,
m,13,Uncalibrated,
m,14,TB 5V,
m,15,FP10 Supply Out of Range,
m,17,FET Open,
m,18,IA Offset,
m,19,IL Offset,
m,20,3V Supply Out of Range,
m,21,12V Supply Out of Range,
m,22,VA High,
m,23,Controller Reset,
m,24,LVD,
m,25,Log Timeout,
m,26,EEPROM Access Failure,

#
# Load alarms for Prostar MPPT
#
l,0,External Short Circuit,
l,1,Overcurrent,
l,2,FET Shorted,
l,3,Software Bug,
l,4,HVD,
l,5,Heatsink Hot,
l,6,DIP Switch Changed,
l,7,EEPROM Setting Changed,

#
# Array faults for Prostar MPPT
#
y,0,Overcurrent Phase 1,
y,1,FET Shorted,
y,2,Software Bug,
y,3,Battery HVD,
y,4,Array HVD,
y,5,EEPROM Setting Changed,
y,6,RTS Shorted,
y,7,RTS was disconnected,
y,8,Local temp sensor failure,
y,9,Battery LVD,
y,10,Slave Control Timeout,
y,11,DIP Switch Changed,
\\ end of file
